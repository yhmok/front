<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <style>
      * {margin:0; padding:0;}
      a {text-decoration: none; color: black; font-weight: bold; font-size: 14px;}
      #myTab li>a {
        display: inline-block;
        width: 70%;
        /* 말줄임표 넣기 */
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
      }
      #myTab li>span {
        display: inline-block;  
        font-size: 12px;
        width: 25%;
        text-align: right;
      }
    </style>
</head>
<body>
   
    <div class="container">
        <h1 class="text-center fs-2 m-3">신문 구독하기</h1>
        <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link active" href="https://www.chosun.com/arc/outboundfeeds/rss/?outputType=xml">오늘의 주요뉴스</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://www.chosun.com/arc/outboundfeeds/rss/category/entertainments/?outputType=xml">엔터네인먼트</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://www.chosun.com/arc/outboundfeeds/rss/category/sports/?outputType=xml">스포츠</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://www.chosun.com/arc/outboundfeeds/rss/category/international/?outputType=xml">국제사회</a>
            </li>
        </ul>
        <div class="tab-content" id="myTab">
            신문기사 나오기
        </div>
    </div>

    <script>
      var nav = $(".nav-item");
      nav.click(function() {
        nav.find("a").removeClass("active");
        $(this).find("a").addClass("active");
      })

      var a=$(".nav-item a");
      a.on('click', function(event){
        event.preventDefault();
        $("#myTab").empty(); //내용비우기
        var url = $(this).attr("href"); //getAttribute("href")

        $.ajax({
          url: url,
          dataType: "xml",
          success: function(data) {
            var list = $(data).find("item")
            var out = "<ul class='list-group'>"

            $.each(list, function(i, d) {
              if(i == 5) {
                return false
              }
              var title = $(this).find("title").text();
              var link = $(this).find("link").text();
              var pubDate = $(this).find("pubDate").text(); // 문자열
              pubDate = new Date(pubDate).toLocaleString();

              out +=` <li class='list-group-item'>${i+1})
                <a href="${link}">${title}</a>
                <span>${pubDate}</span>
                </li>
                `
            });
          
            $("#myTab").append(out);
            out += "</ul>"
          }
        });
      });

      nav.first().find('a').click(); //첫번째버튼 자동 클릭
      //nav.first().find('a').trigger('click'); //첫번째버튼 자동 클릭
    </script>
</body>
</html>
<!-- 
CORS에러 발생시
 - 크롬웹스토어에서 CORS검색  

 AXIOS
  - https://axios-http.com/kr/docs/intro
  - node.js와 브라우저를 위한 Promise 기반 HTTP 클라이언트 
 -->